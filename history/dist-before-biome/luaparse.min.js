/*!
 * @license
 * luaparse-fivem-dev 0.3.3 https://fstirlitz.github.io/luaparse/
 * Copyright 2012-2025 Oskar Schöldström <public@oxy.fi> (http://www.oxy.fi/) |  Modified by Sh4dow#8080 | Fixed By ItzDabbzz
 * MIT license
 */
!function(e,t){"use strict";var n={function:!0,object:!0},r=n[typeof exports]&&exports&&!exports.nodeType&&exports,a=n[typeof module]&&module&&!module.nodeType&&module,o=r&&a&&"object"==typeof global&&global,n=a&&a.exports===r&&r;!o||o.global!==o&&o.window!==o&&o.self!==o||(e=o),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(define(["exports"],t),r&&n&&t(a.exports)):t(r&&a?n?a.exports:r:e.luaparse={})}(this,function(n){"use strict";var s,f,c,d,u;n.version="1.0.3";const h=["+=","-=","*=","/=","&=","|=","^=","<<=",">>="];var r=n.defaultOptions={wait:!1,comments:!0,scope:!1,locations:!1,ranges:!1,onCreateNode:null,onCreateScope:null,onDestroyScope:null,onLocalDeclaration:null,luaVersion:"FiveM5.4",encodingMode:"none",debug:!1};function t(e,t){if(t=t||0,e<128)return String.fromCharCode(e);if(e<2048)return String.fromCharCode(192|t|e>>6,128|t|63&e);if(e<65536)return String.fromCharCode(224|t|e>>12,128|t|e>>6&63,128|t|63&e);if(e<2097152)return String.fromCharCode(240|t|e>>18,128|t|e>>12&63,128|t|e>>6&63,128|t|63&e);if(e<67108864)return String.fromCharCode(248|t|e>>24,128|t|e>>18&63,128|t|e>>12&63,128|t|e>>6&63,128|t|63&e);if(e<=2147483647)return String.fromCharCode(252|t|e>>30,128|t|e>>24&63,128|t|e>>18&63,128|t|e>>12&63,128|t|e>>6&63,128|t|63&e);throw new Error("Should not happen")}function e(n){return function(e){var t=n.exec(e);if(!t)return e;W(null,x.invalidCodeUnit,function(e,t){for(var n=e.toString(16);n.length<t;)n="0"+n;return n}(t[0].charCodeAt(0),4).toUpperCase())}}function a(e,t){var n;f.debug&&(n="[luaparse:debug] ",void 0!==t?console.log(n+e,t):console.log(n+e))}var o={"pseudo-latin1":{fixup:e(/[^\x00-\xff]/),encodeByte:function(e){return null===e?"":String.fromCharCode(e)},encodeUTF8:function(e){return t(e)}},"x-user-defined":{fixup:e(/[^\x00-\x7f\uf780-\uf7ff]/),encodeByte:function(e){return null===e?"":128<=e?String.fromCharCode(63232|e):String.fromCharCode(e)},encodeUTF8:function(e){return t(e,63232)}},none:{discardStrings:!0,fixup:function(e){return e},encodeByte:function(e){return""},encodeUTF8:function(e){return""}}},i=1,l=2,p=4,m=8,g=16,v=32,b=64,y=128,S=256;n.tokenTypes={EOF:i,StringLiteral:l,Keyword:p,Identifier:m,NumericLiteral:g,Punctuator:v,BooleanLiteral:b,NilLiteral:y,VarargLiteral:S};var x=n.errors={unexpected:"unexpected %1 '%2' near '%3'",unexpectedEOF:"unexpected symbol near '<eof>'",expected:"'%1' expected near '%2'",expectedToken:"%1 expected near '%2'",unfinishedString:"unfinished string near '%1'",malformedNumber:"malformed number near '%1'",decimalEscapeTooLarge:"decimal escape too large near '%1'",invalidEscape:"invalid escape sequence near '%1'",hexadecimalDigitExpected:"hexadecimal digit expected near '%1'",braceExpected:"missing '%1' near '%2'",tooLargeCodepoint:"UTF-8 value too large near '%1'",unfinishedLongString:"unfinished long string (starting at line %1) near '%2'",unfinishedLongComment:"unfinished long comment (starting at line %1) near '%2'",ambiguousSyntax:"ambiguous syntax (function call x new statement) near '%1'",noLoopToBreak:"no loop to break near '%1'",labelAlreadyDefined:"label '%1' already defined on line %2",labelNotVisible:"no visible label '%1' for <goto>",gotoJumpInLocalScope:"<goto %1> jumps into the scope of local '%2'",cannotUseVararg:"cannot use '...' outside a vararg function near '%1'",invalidCodeUnit:"code unit U+%1 is not allowed in the current encoding mode",unknownAttribute:"unknown attribute '%1'"},C=n.ast={labelStatement:function(e){return{type:"LabelStatement",label:e}},breakStatement:function(){return{type:"BreakStatement"}},gotoStatement:function(e){return{type:"GotoStatement",label:e}},returnStatement:function(e){return{type:"ReturnStatement",arguments:e}},ifStatement:function(e){return{type:"IfStatement",clauses:e}},ifClause:function(e,t){return{type:"IfClause",condition:e,body:t}},elseifClause:function(e,t){return{type:"ElseifClause",condition:e,body:t}},elseClause:function(e){return{type:"ElseClause",body:e}},whileStatement:function(e,t){return{type:"WhileStatement",condition:e,body:t}},doStatement:function(e){return{type:"DoStatement",body:e}},repeatStatement:function(e,t){return{type:"RepeatStatement",condition:e,body:t}},localStatement:function(e,t){return{type:"LocalStatement",variables:e,init:t}},localOperatorStatement:function(e,t,n){return{type:"LocalOperatorStatement",operator:e,variables:t,init:n}},assignmentStatement:function(e,t){return{type:"AssignmentStatement",variables:e,init:t}},compoundAssignmentStatement:function(e,t,n){return{type:"CompoundAssignmentStatement",operator:e,variables:t,init:n}},callStatement:function(e){return{type:"CallStatement",expression:e}},functionStatement:function(e,t,n,r){return{type:"FunctionDeclaration",identifier:e,isLocal:n,parameters:t,body:r}},forNumericStatement:function(e,t,n,r,a){return{type:"ForNumericStatement",variable:e,start:t,end:n,step:r,body:a}},forGenericStatement:function(e,t,n){return{type:"ForGenericStatement",variables:e,iterators:t,body:n}},chunk:function(e){return{type:"Chunk",body:e}},attribute:function(e){return{type:"Attribute",name:e}},identifier:function(e){return{type:"Identifier",name:e}},identifierWithAttribute:function(e,t){return{type:"IdentifierWithAttribute",name:e,attribute:t}},literal:function(e,t,n){return{type:e=e===l?"StringLiteral":e===g?"NumericLiteral":e===b?"BooleanLiteral":e===y?"NilLiteral":"VarargLiteral",value:t,raw:n}},tableKey:function(e,t){return{type:"TableKey",key:e,value:t}},tableKeyString:function(e,t){return{type:"TableKeyString",key:e,value:t}},tableValue:function(e){return{type:"TableValue",value:e}},tableSetValue:function(e){return{type:"TableSetValue",value:e}},tableConstructorExpression:function(e){return{type:"TableConstructorExpression",fields:e}},binaryExpression:function(e,t,n){return{type:"and"===e||"or"===e?"LogicalExpression":"BinaryExpression",operator:e,left:t,right:n}},unaryExpression:function(e,t){return{type:"UnaryExpression",operator:e,argument:t}},memberExpression:function(e,t,n){return{type:"MemberExpression",indexer:t,identifier:n,base:e}},indexExpression:function(e,t){return{type:"IndexExpression",base:e,index:t}},callExpression:function(e,t){return{type:"CallExpression",base:e,arguments:t}},tableCallExpression:function(e,t){return{type:"TableCallExpression",base:e,arguments:t,argument:t}},stringCallExpression:function(e,t){return{type:"StringCallExpression",base:e,argument:t}},comment:function(e,t){return{type:"Comment",value:e,raw:t}},cStyleComment:function(e,t){return{type:"CStyleComment",value:e,raw:t}}};function E(e){var t;return ue&&((t=le.pop()).complete(),t.bless(e)),f.onCreateNode&&f.onCreateNode(e),e}var A=Array.prototype.slice,w=(Object.prototype.toString,function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1});function L(e){var n=A.call(arguments,1);return e=e.replace(/%(\d)/g,function(e,t){return""+n[t-1]||""})}Array.prototype.indexOf&&(w=function(e,t){return e.indexOf(t)});var k,O,N,T,D,I,F,V,G,U,B,j=function(e){for(var t,n,r=A.call(arguments,1),a=0,o=r.length;a<o;++a)for(n in t=r[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e};function P(e){return Object.create?Object.create(e,{line:{writable:!0,value:e.line},index:{writable:!0,value:e.index},column:{writable:!0,value:e.column}}):e}function W(e){var t,n,r=L.apply(null,A.call(arguments,1));throw f.debug&&(a("ERROR: "+r),a("Current token:",e),a("Current position: line "+F+", column "+(k-V+1))),null===e||void 0===e.line?(n=k-V+1,(t=P(new SyntaxError(L("[%1:%2] %3",F,n,r)))).index=k,t.line=F):(n=e.range[0]-e.lineStart,(t=P(new SyntaxError(L("[%1:%2] %3",e.line,n,r)))).line=e.line,t.index=e.range[0]),t.column=n,t}function K(e){var t=s.slice(e.range[0],e.range[1]);return t||e.value}function M(e,t){W(t,x.expectedToken,e,K(t))}function R(e){var t,n=K(T);if(void 0===e.type)return W(e,x.unexpected,"symbol",e,n);switch(e.type){case l:t="string";break;case p:t="keyword";break;case m:t="identifier";break;case g:t="number";break;case v:t="symbol";break;case b:t="boolean";break;case y:return W(e,x.unexpected,"symbol","nil",n);case i:return W(e,x.unexpectedEOF)}return W(e,x.unexpected,t,K(e),n)}function J(){for(f.debug&&a("Lexing at index "+k+", line "+F),q();45===s.charCodeAt(k)&&45===s.charCodeAt(k+1);)!function(){I=k,k+=2;var e=s.charAt(k),t="",n=!1,r=k,a=V,o=F;"["===e&&(!1===(t=Q(!0))?t=e:n=!0);if(!n){for(;k<c&&!_(s.charCodeAt(k));)++k;f.comments&&(t=s.slice(r,k))}f.comments&&(t=C.comment(t,s.slice(I,k)),f.locations&&(t.loc={start:{line:o,column:I-a},end:{line:F,column:k-V}}),f.ranges&&(t.range=[I,k]),f.onCreateNode&&f.onCreateNode(t),D.push(t))}(),q();if(d.cStyleComments)for(;47===s.charCodeAt(k)&&42===s.charCodeAt(k+1);)!function(){I=k;var e=s.charAt(k),t="",n=!1,r=k,a=V,o=F;!1===(t=function(e){var t,n="",r=!1,a=F;k+=2,_(s.charCodeAt(k))&&z();t=k;for(;k<c;){for(;_(s.charCodeAt(k));)z();if("*"===s.charAt(k++)&&(r=!0,"/"!==s.charAt(k)&&(r=!1)),r)return n+=s.slice(t,k-1),k+=1,n}W(null,e?x.unfinishedLongComment:x.unfinishedLongString,a,"<eof>")}(!0))?t=e:n=!0;if(!n){for(;k<c&&!_(s.charCodeAt(k));)++k;f.comments&&(t=s.slice(r,k))}f.comments&&(t=C.cStyleComment(t,s.slice(I,k)),f.locations&&(t.loc={start:{line:o,column:I-a},end:{line:F,column:k-V}}),f.ranges&&(t.range=[I,k]),f.onCreateNode&&f.onCreateNode(t),D.push(t))}(),q();if(c<=k)return f.debug&&a("Reached EOF"),{type:i,value:"<eof>",line:F,lineStart:V,range:[k,k]};var e,t=s.charCodeAt(k),n=s.charCodeAt(k+1);if(I=k,65<=(e=t)&&e<=90||97<=e&&e<=122||95===e||!!(d.extendedIdentifiers&&128<=e))return function(){var e,t;for(;function(e){return 65<=e&&e<=90||97<=e&&e<=122||95===e||48<=e&&e<=57||!!(d.extendedIdentifiers&&128<=e)}(s.charCodeAt(++k)););!function(e){switch(e.length){case 2:return"do"===e||"if"===e||"in"===e||"or"===e;case 3:return"and"===e||"end"===e||"for"===e||"not"===e;case 4:return"else"===e||"then"===e?!0:!(!d.labels||d.contextualGoto)&&"goto"===e;case 5:return"break"===e||"local"===e||"until"===e||"while"===e;case 6:return"elseif"===e||"repeat"===e||"return"===e;case 8:return"function"===e}return!1}(e=u.fixup(s.slice(I,k)))?"true"===e||"false"===e?(t=b,e="true"===e):"nil"===e?(t=y,e=null):t=m:t=p;return{type:t,value:e,line:F,lineStart:V,range:[I,k]}}();switch(t){case 39:case 34:case d.compileTimeJenkins&&96:return function(){for(var e,t=s.charCodeAt(k++),n=F,r=V,a=k,o=u.discardStrings?null:"";e=s.charCodeAt(k++),t!==e;){var i;(c<k||_(e))&&(o+=s.slice(a,k-1),W(null,x.unfinishedString,s.slice(I,k-1))),92===e&&(u.discardStrings||(i=s.slice(a,k-1),o+=u.fixup(i)),i=function(){var e=k;switch(s.charAt(k)){case"a":return++k,"";case"n":return++k,"\n";case"r":return++k,"\r";case"t":return++k,"\t";case"v":return++k,"\v";case"b":return++k,"\b";case"f":return++k,"\f";case"\r":case"\n":return z(),"\n";case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;ee(s.charCodeAt(k))&&k-e<3;)++k;var t=s.slice(e,k),n=parseInt(t,10);return 255<n&&W(null,x.decimalEscapeTooLarge,"\\"+n),u.encodeByte(n,"\\"+t);case"z":if(d.skipWhitespaceEscape)return++k,q(),"";break;case"x":if(d.hexEscapes){if(te(s.charCodeAt(k+1))&&te(s.charCodeAt(k+2)))return k+=3,u.encodeByte(parseInt(s.slice(e+1,k),16),"\\"+s.slice(e,k));W(null,x.hexadecimalDigitExpected,"\\"+s.slice(e,k+2))}break;case"u":if(d.unicodeEscapes)return function(){var e=k++;"{"!==s.charAt(k++)&&W(null,x.braceExpected,"{","\\"+s.slice(e,k));te(s.charCodeAt(k))||W(null,x.hexadecimalDigitExpected,"\\"+s.slice(e,k));for(;48===s.charCodeAt(k);)++k;var t=k;for(;te(s.charCodeAt(k));)++k-t>(d.relaxedUTF8?8:6)&&W(null,x.tooLargeCodepoint,"\\"+s.slice(e,k));var n=s.charAt(k++);"}"!==n&&('"'===n||"'"===n?W(null,x.braceExpected,"}","\\"+s.slice(e,k--)):W(null,x.hexadecimalDigitExpected,"\\"+s.slice(e,k)));var r=parseInt(s.slice(t,k-1)||"0",16),n="\\"+s.slice(e,k);r>(d.relaxedUTF8?2147483647:1114111)&&W(null,x.tooLargeCodepoint,n);return u.encodeUTF8(r,n)}();break;case"\\":case'"':case"'":return s.charAt(k++)}d.strictEscapes&&W(null,x.invalidEscape,"\\"+s.slice(e,k+1));return s.charAt(k++)}(),u.discardStrings||(o+=i),a=k)}u.discardStrings||(o+=u.encodeByte(null),o+=u.fixup(s.slice(a,k-1)));return{type:l,value:o,line:n,lineStart:r,lastLine:F,lastLineStart:V,range:[I,k]}}();case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return H();case 46:return ee(n)?H():46===n?46===s.charCodeAt(k+2)?{type:S,value:"...",line:F,lineStart:V,range:[I,k+=3]}:X(".."):X(".");case d.safeNavigation&&63:if(46===n)return X("?.");case 61:return 61===n?X("=="):X("=");case 62:return d.bitwiseOperators&&62===n?61===s.charCodeAt(k+2)?X(">>="):X(">>"):X(61===n?">=":">");case 60:return d.bitwiseOperators&&60===n?61===s.charCodeAt(k+2)?X("<<="):X("<<"):X(61===n?"<=":"<");case 126:if(61===n)return X("~=");if(!d.bitwiseOperators)break;return X("~");case 58:return d.labels&&58===n?X("::"):X(":");case 91:return 91===n||61===n?function(){var e=F,t=V,n=Q(!1);!1===n&&W(O,x.expected,"[",K(O));return{type:l,value:u.discardStrings?null:u.fixup(n),line:e,lineStart:t,lastLine:F,lastLineStart:V,range:[I,k]}}():X("[");case 47:if(61!==n)return d.integerDivision&&47===n?X("//"):X("/");case 38:case 124:if(!d.bitwiseOperators)break;case 42:case 94:case 124:case 47:case 38:case 45:case 43:if(61===n)return X(s.charAt(k)+"=");case 37:case 44:case 123:case 125:case 93:case 40:case 41:case 59:case 35:return X(s.charAt(k))}return R(s.charAt(k))}function z(){var e=s.charCodeAt(k),t=s.charCodeAt(k+1);return _(e)&&(10===e&&13===t&&++k,13===e&&10===t&&++k,++F,V=++k,1)}function q(){for(;k<c;){var e=s.charCodeAt(k);if(9===(e=e)||32===e||11===e||12===e)++k;else if(!z())break}}function X(e){return k+=e.length,{type:v,value:e,line:F,lineStart:V,range:[I,k]}}function H(){var e=s.charAt(k),t=s.charAt(k+1),e=("0"===e&&0<="xX".indexOf(t||null)?function(){var e,t,n=0,r=1,a=1;i=k+=2,te(s.charCodeAt(k))||W(null,x.malformedNumber,s.slice(I,k));for(;te(s.charCodeAt(k));)++k;e=parseInt(s.slice(i,k),16);var o=!1;if("."===s.charAt(k)){for(o=!0,t=++k;te(s.charCodeAt(k));)++k;n=s.slice(t,k),n=t===k?0:parseInt(n,16)/Math.pow(16,k-t)}var i=!1;if(0<="pP".indexOf(s.charAt(k)||null)){for(i=!0,++k,0<="+-".indexOf(s.charAt(k)||null)&&(a="+"===s.charAt(k++)?1:-1),t=k,ee(s.charCodeAt(k))||W(null,x.malformedNumber,s.slice(I,k));ee(s.charCodeAt(k));)++k;r=s.slice(t,k),r=Math.pow(2,r*a)}return{value:(e+n)*r,hasFractionPart:o||i}}:function(){for(;ee(s.charCodeAt(k));)++k;var e=!1;if("."===s.charAt(k))for(e=!0,++k;ee(s.charCodeAt(k));)++k;var t=!1;if(0<="eE".indexOf(s.charAt(k)||null))for(t=!0,++k,0<="+-".indexOf(s.charAt(k)||null)&&++k,ee(s.charCodeAt(k))||W(null,x.malformedNumber,s.slice(I,k));ee(s.charCodeAt(k));)++k;return{value:parseFloat(s.slice(I,k)),hasFractionPart:e||t}})(),t=function(){if(d.imaginaryNumbers)return 0<="iI".indexOf(s.charAt(k)||null)&&(++k,!0)}();return function(){if(d.integerSuffixes)if(0<="uU".indexOf(s.charAt(k)||null))if(++k,0<="lL".indexOf(s.charAt(k)||null)){if(++k,0<="lL".indexOf(s.charAt(k)||null))return++k,"ULL";W(null,x.malformedNumber,s.slice(I,k))}else W(null,x.malformedNumber,s.slice(I,k));else if(0<="lL".indexOf(s.charAt(k)||null)){if(++k,0<="lL".indexOf(s.charAt(k)||null))return++k,"LL";W(null,x.malformedNumber,s.slice(I,k))}}()&&(t||e.hasFractionPart)&&W(null,x.malformedNumber,s.slice(I,k)),{type:g,value:e.value,line:F,lineStart:V,range:[I,k]}}function Q(e){var t,n=0,r="",a=!1,o=F;for(++k;"="===s.charAt(k+n);)++n;if("["!==s.charAt(k+n))return!1;for(k+=n+1,_(s.charCodeAt(k))&&z(),t=k;k<c;){for(;_(s.charCodeAt(k));)z();if("]"===s.charAt(k++)){for(var a=!0,i=0;i<n;++i)"="!==s.charAt(k+i)&&(a=!1);"]"!==s.charAt(k+n)&&(a=!1)}if(a)return r+=s.slice(t,k-1),k+=n+1,r}W(null,e?x.unfinishedLongComment:x.unfinishedLongString,o,"<eof>")}function Y(){N=O,O=T,T=J()}function Z(e){return e===O.value&&(Y(),!0)}function $(e){e===O.value?Y():W(O,x.expected,e,K(O))}function _(e){return 10===e||13===e}function ee(e){return 48<=e&&e<=57}function te(e){return 48<=e&&e<=57||97<=e&&e<=102||65<=e&&e<=70}function ne(e){return v===e.type?0<="#-~".indexOf(e.value):p===e.type&&"not"===e.value}function re(){var e=G[U++].slice();G.push(e),f.debug&&a("Created new scope at depth "+U),f.onCreateScope&&f.onCreateScope()}function ae(){G.pop();--U,f.debug&&a("Destroyed scope, new depth: "+U),f.onDestroyScope&&f.onDestroyScope()}function oe(e){f.onLocalDeclaration&&f.onLocalDeclaration(e),-1===w(G[U],e)&&G[U].push(e)}function ie(e){f.debug&&a("Adding identifier to scope: "+e.name),oe(e.name),se(e,!0)}function se(e,t){t||-1!==function(e,t,n){for(var r=0,a=e.length;r<a;++r)if(e[r][t]===n)return r;return-1}(B,"name",e.name)||B.push(e),e.isLocal=t}function ce(e){return-1!==w(G[U],e)}Object.assign&&(j=Object.assign),n.SyntaxError=SyntaxError,n.lex=J;var ue,le=[];function pe(){return new fe(O)}function fe(e){f.locations&&(this.loc={start:{line:e.line,column:e.range[0]-e.lineStart},end:{line:0,column:0}}),f.ranges&&(this.range=[e.range[0],0])}function de(){ue&&le.push(pe())}function he(e){ue&&le.push(e)}function me(){this.scopes=[],this.pendingGotos=[]}function ge(){this.level=0,this.loopLevels=[]}function ve(){return new(d.labels?me:ge)}function be(e){for(var t,n=[];!function(e){if(i===e.type)return 1;if(p===e.type)switch(e.value){case"else":case"elseif":case"end":case"until":return 1;default:return}}(O);){if("return"===O.value||!d.relaxedBreak&&"break"===O.value){n.push(ye(e));break}t=ye(e),Z(";"),t&&n.push(t)}return n}function ye(e){if(f.debug&&a("Parsing statement, current token: "+O.value),de(),v===O.type&&Z("::"))return function(e){var t=O,n=xe();f.scope&&(oe("::"+t.value+"::"),se(n,!0));return $("::"),e.addLabel(t.value,t),E(C.labelStatement(n))}(e);if(!d.emptyStatement||!Z(";")){if(e.raiseDeferredErrors(),p===O.type)switch(O.value){case"local":return Y(),function(e){var t,n,r,a=N;if(m===O.type){for(var o=[],i=[];ue&&(r=pe()),t=xe(),(n=null)!==(n=d.attributes?function(){if(de(),Z("<")){m!==O.type&&M("<name>",O);var e=O.value;return d.attributes[e]||W(O,x.unknownAttribute,e),Y(),$(">"),E(C.attribute(e))}ue&&le.pop();return null}():n)?(ue&&he(r),o.push(E(C.identifierWithAttribute(t,n)))):o.push(t),e.addLocal(t.name,a),Z(","););const p=[...d.compoundOperators?h:[],d.inKeyword&&"in"];var s=p.find(e=>Z(e));if(Z("=")||void 0!==s)do{var c=we(e)}while(i.push(c),Z(","));if(f.scope)for(var u=0,l=o.length;u<l;++u)ie(o[u]);return E(s?C.localOperatorStatement(s,o,i):C.localStatement(o,i))}{if(Z("function"))return t=xe(),e.addLocal(t.name,a),f.scope&&(ie(t),re()),Ce(t,!0);M("<name>",O)}}(e);case"if":return Y(),function(e){var t,n,r,a=[];ue&&(r=le[le.length-1],le.push(r));t=we(e),$("then"),f.scope&&re();e.pushScope(),n=be(e),e.popScope(),f.scope&&ae();a.push(E(C.ifClause(t,n))),ue&&(r=pe());for(;Z("elseif");)he(r),t=we(e),$("then"),f.scope&&re(),e.pushScope(),n=be(e),e.popScope(),f.scope&&ae(),a.push(E(C.elseifClause(t,n))),ue&&(r=pe());Z("else")&&(ue&&(r=new fe(N),le.push(r)),f.scope&&re(),e.pushScope(),n=be(e),e.popScope(),f.scope&&ae(),a.push(E(C.elseClause(n))));return $("end"),E(C.ifStatement(a))}(e);case"return":return Y(),function(e){var t=[];if("end"!==O.value){var n=Ae(e);if(null!=n)for(t.push(n);Z(",");)n=we(e),t.push(n);Z(";")}return E(C.returnStatement(t))}(e);case"function":return Y(),Ce(function(){var e,t,n;ue&&(n=pe());e=xe(),f.scope&&(se(e,ce(e.name)),re());for(;Z(".");)he(n),t=xe(),e=E(C.memberExpression(e,".",t));Z(":")&&(he(n),t=xe(),e=E(C.memberExpression(e,":",t)),f.scope&&oe("self"));return e}());case"while":return Y(),function(e){var t=we(e);$("do"),f.scope&&re();e.pushScope(!0);var n=be(e);e.popScope(),f.scope&&ae();return $("end"),E(C.whileStatement(t,n))}(e);case"for":return Y(),function(e){var t,n=xe();f.scope&&(re(),ie(n));{if(Z("=")){var r=we(e);$(",");var a=we(e),o=Z(",")?we(e):null;return $("do"),e.pushScope(!0),t=be(e),e.popScope(),$("end"),f.scope&&ae(),E(C.forNumericStatement(n,r,a,o,t))}for(var i=[n];Z(",");)n=xe(),f.scope&&ie(n),i.push(n);$("in");var s=[];do{var c=we(e)}while(s.push(c),Z(","));return $("do"),e.pushScope(!0),t=be(e),e.popScope(),$("end"),f.scope&&ae(),E(C.forGenericStatement(i,s,t))}}(e);case"repeat":return Y(),function(e){f.scope&&re();e.pushScope(!0);var t=be(e);$("until"),e.raiseDeferredErrors();var n=we(e);e.popScope(),f.scope&&ae();return E(C.repeatStatement(n,t))}(e);case"break":return Y(),e.isInLoop()||W(O,x.noLoopToBreak,O.value),Z(";"),E(C.breakStatement());case"do":return Y(),function(e){f.scope&&re();e.pushScope();var t=be(e);e.popScope(),f.scope&&ae();return $("end"),E(C.doStatement(t))}(e);case"goto":return Y(),Se(e)}return d.contextualGoto&&O.type===m&&"goto"===O.value&&T.type===m&&"goto"!==T.value?(Y(),Se(e)):(ue&&le.pop(),function(e){var t,n,r,a,o,i=[];ue&&(n=pe());for(;;){if(ue&&(t=pe()),m===O.type)o=O.value,a=xe(),f.scope&&se(a,ce(o)),r=!0;else{if("("!==O.value)return R(O);Y(),a=we(e),$(")"),r=!1}e:for(;;){switch(l===O.type?'"':O.value){case".":case d.safeNavigation&&"?.":case"[":r=!0;break;case":":case"(":case"{":case'"':r=null;break;default:break e}a=ke(a,t,e)}if(i.push(a),","!==O.value)break;if(!r)return R(O);Y()}{if(1===i.length&&null===r)return he(t),E(C.callStatement(i[0]));if(!r)return R(O)}var s=d.compoundOperators?h.find(e=>e===O.value):void 0;$(void 0!==s?O.value:"=");var c=[];for(;c.push(we(e)),Z(","););return he(n),E(null!=s?C.compoundAssignmentStatement(s,i,c):C.assignmentStatement(i,c))}(e))}ue&&le.pop()}function Se(e){var t=O.value,n=N,r=xe();return e.addGoto(t,n),E(C.gotoStatement(r))}function xe(){de();var e=O.value;return m!==O.type&&M("<name>",O),Y(),E(C.identifier(e))}function Ce(e,t){var n=ve();n.pushScope();var r=[];if($("("),!Z(")"))for(;;){if(m===O.type){var a=xe();if(f.scope&&ie(a),r.push(a),Z(","))continue}else S===O.type?(n.allowVararg=!0,r.push(Te(n))):M("<name> or '...'",O);$(")");break}var o=be(n);return n.popScope(),$("end"),f.scope&&ae(),E(C.functionStatement(e,r,t=t||!1,o))}function Ee(e){for(var t,n,r=[];;){if(de(),v===O.type&&Z("["))t=we(e),$("]"),$("="),n=we(e),r.push(E(C.tableKey(t,n)));else if(d.setConstructors&&v===O.type&&Z("."))n=we(e),r.push(E(C.tableSetValue(n)));else if(m===O.type)"="===T.value?(t=xe(),Y(),n=we(e),r.push(E(C.tableKeyString(t,n)))):(n=we(e),r.push(E(C.tableValue(n))));else{if(null==(n=Ae(e))){le.pop();break}r.push(E(C.tableValue(n)))}if(!(0<=",;".indexOf(O.value)))break;Y()}return $("}"),E(C.tableConstructorExpression(r))}function Ae(e){f.debug&&a("Parsing expression");e=function e(t,n){var r,a,o=O.value;ue&&(a=pe());{var i;ne(O)&&(de(),Y(),null==(i=e(10,n))&&M("<expression>",O),r=E(C.unaryExpression(o,i)))}null==r&&null==(r=Te(n))&&(r=Oe(n));if(null==r)return null;for(;;){if(o=O.value,0===(s=v===O.type||p===O.type?Le(o):0)||s<=t)break;"^"!==o&&".."!==o||--s,Y();var s=e(s,n);null==s&&M("<expression>",O),ue&&le.push(a),r=E(C.binaryExpression(o,r,s))}return r}(0,e);return f.debug&&(e?a("Expression result:",{type:e.type}):a("No expression found")),e}function we(e){e=Ae(e);if(null!=e)return e;M("<expression>",O)}function Le(e){var t=e.charCodeAt(0),n=e.length;if(1===n)switch(t){case 94:return 12;case 42:case 47:case 37:return 10;case 43:case 45:return 9;case 38:return 6;case 126:return 5;case 124:return 4;case 60:case 62:return 3}else if(2===n)switch(t){case 47:return 10;case 46:case d.safeNavigation&&63:return 8;case 60:case 62:return"<<"===e||">>"===e?7:3;case 61:case 126:return 3;case 111:return 1}else if(97===t&&"and"===e)return 2;return 0}function ke(e,t,n){var r,a;if(v===O.type)switch(O.value){case"[":return he(t),Y(),r=we(n),$("]"),E(C.indexExpression(e,r));case".":return he(t),Y(),a=xe(),E(C.memberExpression(e,".",a));case d.safeNavigation&&"?.":return he(t),Y(),a=xe(),E(C.memberExpression(e,"?.",a));case":":return he(t),Y(),a=xe(),e=E(C.memberExpression(e,":",a)),he(t),Ne(e,n);case"(":case"{":return he(t),Ne(e,n)}else if(l===O.type)return he(t),Ne(e,n);return null}function Oe(e){var t,n,r;if(ue&&(r=pe()),m===O.type)n=O.value,t=xe(),f.scope&&se(t,ce(n));else{if(!Z("("))return null;t=we(e),$(")")}for(;;){var a=ke(t,r,e);if(null===a)break;t=a}return t}function Ne(e,t){if(v===O.type)switch(O.value){case"(":d.emptyStatement||O.line!==N.line&&W(null,x.ambiguousSyntax,O.value),Y();var n=[],r=Ae(t);if(null!=r)for(n.push(r);Z(",");)r=we(t),n.push(r);return $(")"),E(C.callExpression(e,n));case"{":de(),Y();var a=Ee(t);return E(C.tableCallExpression(e,a))}else if(l===O.type)return E(C.stringCallExpression(e,Te(t)));M("function arguments",O)}function Te(e){var t,n=l|g|b|y|S,r=O.value,a=O.type;if(ue&&(t=pe()),a!==S||e.allowVararg||W(O,x.cannotUseVararg,O.value),a&n){he(t);n=s.slice(O.range[0],O.range[1]);return Y(),E(C.literal(a,r,n))}return p===a&&"function"===r?(he(t),Y(),f.scope&&re(),Ce(null)):Z("{")?(he(t),Ee(e)):void 0}fe.prototype.complete=function(){f.locations&&(this.loc.end.line=N.lastLine||N.line,this.loc.end.column=N.range[1]-(N.lastLineStart||N.lineStart)),f.ranges&&(this.range[1]=N.range[1])},fe.prototype.bless=function(e){var t;this.loc&&(t=this.loc,e.loc={start:{line:t.start.line,column:t.start.column},end:{line:t.end.line,column:t.end.column}}),this.range&&(e.range=[this.range[0],this.range[1]])},me.prototype.isInLoop=function(){for(var e=this.scopes.length;0<e--;)if(this.scopes[e].isLoop)return!0;return!1},me.prototype.findLabel=function(e){for(var t=this.scopes.length;0<t--;){if(Object.prototype.hasOwnProperty.call(this.scopes[t].labels,e))return this.scopes[t].labels[e];if(!d.noLabelShadowing)return null}return null},me.prototype.pushScope=function(e){this.scopes.push({labels:{},locals:[],deferredGotos:[],isLoop:!!e})},me.prototype.popScope=function(){for(var e=0;e<this.pendingGotos.length;++e){var t=this.pendingGotos[e];t.maxDepth>=this.scopes.length&&--t.maxDepth<=0&&W(t.token,x.labelNotVisible,t.target)}this.scopes.pop()},me.prototype.addGoto=function(e,t){for(var n=[],r=0;r<this.scopes.length;++r){var a=this.scopes[r];if(n.push(a.locals.length),Object.prototype.hasOwnProperty.call(a.labels,e))return}this.pendingGotos.push({maxDepth:this.scopes.length,target:e,token:t,localCounts:n})},me.prototype.addLabel=function(e,t){var n=this.currentScope(),r=this.findLabel(e);if(null!==r)W(t,x.labelAlreadyDefined,e,r.line);else{for(var a=[],o=0;o<this.pendingGotos.length;++o){var i=this.pendingGotos[o];i.maxDepth>=this.scopes.length&&i.target===e?i.localCounts[this.scopes.length-1]<n.locals.length&&n.deferredGotos.push(i):a.push(i)}this.pendingGotos=a}n.labels[e]={localCount:n.locals.length,line:t.line}},me.prototype.addLocal=function(e,t){this.currentScope().locals.push({name:e,token:t})},me.prototype.currentScope=function(){return this.scopes[this.scopes.length-1]},me.prototype.raiseDeferredErrors=function(){for(var e=this.currentScope(),t=e.deferredGotos,n=0;n<t.length;++n){var r=t[n];W(r.token,x.gotoJumpInLocalScope,r.target,e.locals[r.localCounts[this.scopes.length-1]].name)}},ge.prototype.isInLoop=function(){return!!this.loopLevels.length},ge.prototype.pushScope=function(e){++this.level,e&&this.loopLevels.push(this.level)},ge.prototype.popScope=function(){var e=this.loopLevels,t=e.length;t&&e[t-1]===this.level&&e.pop(),--this.level},ge.prototype.addGoto=ge.prototype.addLabel=function(){throw new Error("This should never happen")},ge.prototype.addLocal=ge.prototype.raiseDeferredErrors=function(){},n.parse=function(e,t){void 0===t&&"object"==typeof e&&(t=e,e=void 0);t=t||{};s=e||"",f=j({},r,t),F=1,V=k=0,c=s.length,G=[[]],U=0,B=[],le=[],f.debug&&(a("Parser initialized with options:",f),a("Lua version: "+f.luaVersion),a("Input length: "+s.length+" characters"));if(!Object.prototype.hasOwnProperty.call(De,f.luaVersion))throw new Error(L("Lua version '%1' not supported",f.luaVersion));d=j({},De[f.luaVersion]),void 0!==f.extendedIdentifiers&&(d.extendedIdentifiers=!!f.extendedIdentifiers);if(!Object.prototype.hasOwnProperty.call(o,f.encodingMode))throw new Error(L("Encoding mode '%1' not supported",f.encodingMode));u=o[f.encodingMode],f.comments&&(D=[]);if(!f.wait)return f.debug&&a("Starting parse immediately"),Fe();f.debug&&a("Waiting for more input before parsing");return n};var De={5.1:{},5.2:{labels:!0,emptyStatement:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,relaxedBreak:!0},5.3:{labels:!0,emptyStatement:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,unicodeEscapes:!0,bitwiseOperators:!0,integerDivision:!0,relaxedBreak:!0},5.4:{labels:!0,emptyStatement:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,unicodeEscapes:!0,bitwiseOperators:!0,integerDivision:!0,relaxedBreak:!0,noLabelShadowing:!0,attributes:{const:!0,close:!0},relaxedUTF8:!0},"FiveM5.4":{labels:!0,emptyStatement:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,unicodeEscapes:!0,bitwiseOperators:!0,integerDivision:!0,relaxedBreak:!0,noLabelShadowing:!0,attributes:{const:!0,close:!0},relaxedUTF8:!0,inKeyword:!0,compileTimeJenkins:!0,compoundOperators:!0,cStyleComments:!0,safeNavigation:!0,setConstructors:!0},LuaJIT:{labels:!0,contextualGoto:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,unicodeEscapes:!0,imaginaryNumbers:!0,integerSuffixes:!0}};function Ie(e){return s+=String(e),c=s.length,n}function Fe(e){void 0!==e&&Ie(e),s&&"#!"===s.substr(0,2)&&(s=s.replace(/^.*/,function(e){return e.replace(/./g," ")})),c=s.length,ue=f.locations||f.ranges,T=J();e=function(){Y(),de(),f.scope&&re();var e=ve();e.allowVararg=!0,e.pushScope();var t=be(e);return e.popScope(),f.scope&&ae(),i!==O.type&&R(O),ue&&!t.length&&(N=O),E(C.chunk(t))}();if(f.comments&&(e.comments=D),f.scope&&(e.globals=B),0<le.length)throw new Error("Location tracking failed. This is most likely a bug in fivem-luaparse");return e}n.write=Ie,n.end=Fe});